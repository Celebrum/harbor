# Harpoon Configuration File
# This configures Harpoon to integrate with Harbor and Kubernetes

# Core Harpoon Settings
core:
  # Enable Harpoon
  enabled: true
  # Log level (debug, info, warning, error)
  log_level: info
  # Data directory
  data_dir: /data/harpoon

# Harbor Integration
harbor:
  # URL of Harbor API (internal)
  url: http://core:8080
  # Admin credentials
  admin_user: admin
  admin_password: Harbor12345
  # Enable all Harbor capabilities
  enable_all_capabilities: true

# Kubernetes Integration
kubernetes:
  # Enable Kubernetes integration
  enabled: true
  # Use existing Kind cluster
  use_kind: true
  # Kind cluster name
  cluster_name: securedme-cluster
  # Number of nodes to use
  node_count: 6
  # Namespace for Harpoon components
  namespace: harpoon-system
  # Service account for Harpoon
  service_account: harpoon-sa

# Image Building and Assembly
builder:
  # Enable image building capabilities
  enabled: true
  # Maximum concurrent builds
  max_concurrent_builds: 5
  # Timeout for build operations (in seconds)
  build_timeout: 1800
  # Enable layer caching
  layer_cache: true
  # Build cache size limit (in GB)
  cache_size_limit: 10

# Container Security
security:
  # Enable security scanning
  scan_enabled: true
  # Use Trivy for vulnerability scanning
  use_trivy: true
  # Block images with critical vulnerabilities
  block_critical: false
  # Enable signature verification
  verify_signatures: false
  # Enable SBOM generation
  generate_sbom: true

# Resource Limits
resources:
  cpu:
    # CPU request for Harpoon components (in CPUs)
    request: "0.5"
    # CPU limit for Harpoon components (in CPUs)
    limit: "2"
  memory:
    # Memory request for Harpoon components (in GB)
    request: "1Gi"
    # Memory limit for Harpoon components (in GB)
    limit: "4Gi"

# Webhooks
webhooks:
  # Enable webhook notifications
  enabled: false
  # Maximum retry attempts for webhook delivery
  max_retry: 3
  # Timeout for webhook requests (in seconds)
  timeout: 5

# Storage
storage:
  # Use Harbor's storage backend
  use_harbor_storage: true

# Networking
networking:
  # Enable ingress for Harpoon API
  enable_ingress: false
  # Expose metrics
  expose_metrics: true
  # Port for metrics
  metrics_port: 9090